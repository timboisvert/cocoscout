<%#
  Card Header Partial

  Usage:
    render "shared/card_header", title: "My Title"

    render "shared/card_header", title: "My Title", links: [
      { text: "Link 1", path: some_path },
      { text: "Link 2", path: other_path }
    ]

    With a block for custom right content:
    render "shared/card_header", title: "My Title" do
      <button>Custom Button</button>
    end

  Parameters:
    - title (required): The header title text
    - links (optional): Array of link hashes with :text and :path keys
    - icon (optional): SVG icon HTML to show before the title
    - bg_class (optional): Background class override (default: "bg-gray-50")
    - border_class (optional): Border class override (default: "border-gray-200")
    - title_class (optional): Title text color class override (default: "text-gray-900")
    - clickable (optional): If true, adds cursor-pointer and data-action for show-toggle
%>
<%
  title = local_assigns[:title]
  links = local_assigns[:links] || []
  icon = local_assigns[:icon]
  bg_class = local_assigns[:bg_class] || "bg-gray-50"
  border_class = local_assigns[:border_class] || "border-gray-200"
  title_class = local_assigns[:title_class] || "text-gray-900"
  clickable = local_assigns[:clickable] || false
  # Capture block content if present
  block_content = block_given? ? capture { yield } : nil
  has_block_content = block_content.present? && block_content.strip.present?
  has_right_content = links.any? || has_block_content
%>
<div class="<%= bg_class %> px-4 py-3 border-b <%= border_class %><%= ' cursor-pointer' if clickable %>"<%= ' data-action="click->show-toggle#toggle"'.html_safe if clickable %>>
  <div class="flex items-center justify-between gap-2">
    <h3 class="text-md font-semibold <%= title_class %> coustard-regular flex items-center gap-2">
      <% if icon.present? %>
        <%= icon.html_safe %>
      <% end %>
      <%= title %>
    </h3>
    <% if has_right_content %>
      <div class="flex flex-wrap items-center gap-x-2 gap-y-1">
        <% if has_block_content %>
          <%= block_content %>
        <% else %>
          <% links.each do |link| %>
            <%= link_to link[:path] do %>
              <%= render "shared/button", text: link[:text], variant: "secondary", size: "small" %>
            <% end %>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
