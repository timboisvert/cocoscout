<%# Renders the grid of talent pool members for inline display %>
<% can_manage = current_user_can_manage?(talent_pool.production) %>
<div class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-3 w-full">
  <% if talent_pool.members.any? %>
    <% talent_pool.members.each do |member| %>
      <div class="relative group"
           data-person-id="<%= member.id %>"
           data-member-type="<%= member.class.name %>">
        <%= link_to member.is_a?(Person) ? manage_person_path(member) : manage_group_path(member),
                    data: { turbo_frame: "_top" },
                    class: "block" do %>
          <div class="relative aspect-square rounded-lg overflow-hidden bg-gray-100 mb-2">
            <% if member.headshot&.attached? %>
              <%= image_tag member.safe_headshot_variant(:tile),
                            class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",
                            loading: "lazy",
                            alt: member.name %>
            <% else %>
              <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200">
                <% if member.is_a?(Person) %>
                  <div class="text-2xl font-bold text-gray-500">
                    <%= member.name.split.map(&:first).join.upcase %>
                  </div>
                <% else %>
                  <svg class="w-1/2 h-1/2 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-7 8c0-2.66 5.33-4 8-4s8 1.34 8 4v2H5v-2zm10-8c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.21 0-.41.02-.61.05A5.978 5.978 0 0117 8c0 2.31-1.31 4.31-3.22 5.32.63-.13 1.3-.2 2-.2 2.67 0 8 1.34 8 4v2h-4v-2.12c-.65-.68-2.05-1.36-3.78-1.7-.92-.16-1.84-.28-2.77-.28z"/>
                  </svg>
                <% end %>
              </div>
            <% end %>
          </div>

          <div class="text-xs font-medium text-gray-900 group-hover:text-pink-600 transition-colors truncate" title="<%= member.name %>">
            <%= member.name %>
          </div>
        <% end %>

        <% if can_manage %>
          <button type="button"
                  class="absolute bottom-8 left-1 right-1 z-20 text-pink-500 bg-white rounded-md px-2 py-1 text-xs font-bold shadow hover:bg-pink-100 transition-all border border-pink-200 opacity-0 group-hover:opacity-100 cursor-pointer"
                  data-action="talent-pool-inline#openRemoveModal"
                  data-person-id="<%= member.id %>"
                  data-member-type="<%= member.class.name %>"
                  data-member-name="<%= member.name %>">
            Remove
          </button>
        <% end %>
      </div>
    <% end %>
  <% end %>

  <% if can_manage %>
    <div class="relative group">
      <button type="button"
              class="block w-full cursor-pointer"
              data-action="talent-pool-inline#openAddModal">
        <div class="relative aspect-square rounded-lg overflow-hidden bg-gray-50 border-2 border-dashed border-gray-300 mb-2 hover:border-pink-500 transition-colors">
          <div class="w-full h-full flex items-center justify-center">
            <div class="text-4xl font-bold text-gray-400 group-hover:text-pink-500 transition-colors">
              +
            </div>
          </div>
        </div>
        <div class="text-xs font-medium text-gray-500 group-hover:text-pink-600 transition-colors">
          Add member
        </div>
      </button>
    </div>
  <% end %>
</div>
