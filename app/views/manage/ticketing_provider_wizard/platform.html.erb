<%= render layout: "manage/ticketing_provider_wizard/wizard_layout", locals: { current_step: 1, step_name: "Platform" } do %>
  <h2 class="text-xl font-semibold text-gray-900 mb-2">Select a Ticketing Platform</h2>
  <p class="text-sm text-gray-600 mb-6">Choose the ticketing platform you want to connect to sync your ticket sales data.</p>

  <%= form_with url: manage_ticketing_wizard_save_platform_path(@organization), method: :post, class: "space-y-4" do |f| %>
    <div class="space-y-3">
      <% @provider_types.each do |provider| %>
        <% is_available = provider[:status] == "available" %>
        <% is_selected = @wizard_state[:provider_type] == provider[:id] %>
        <label class="flex items-center p-4 border rounded-lg transition-colors <%= is_available ? 'cursor-pointer hover:border-pink-300' : 'cursor-not-allowed opacity-60' %> <%= is_selected ? 'border-pink-500 bg-pink-50' : 'border-gray-200' %>">
          <input type="radio" name="provider_type" value="<%= provider[:id] %>"
                 class="h-4 w-4 text-pink-600 border-gray-300 focus:ring-pink-500 accent-pink-600"
                 <%= 'checked' if is_selected %>
                 <%= 'disabled' unless is_available %>>
          <div class="ml-4 flex-1">
            <div class="flex items-center gap-2">
              <span class="font-medium <%= is_available ? 'text-gray-900' : 'text-gray-500' %>"><%= provider[:name] %></span>
              <% unless is_available %>
                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600">Coming Soon</span>
              <% end %>
            </div>
            <% if provider[:description].present? %>
              <p class="text-sm text-gray-500 mt-1"><%= provider[:description] %></p>
            <% end %>
          </div>
        </label>
      <% end %>
    </div>

    <div class="flex justify-end pt-4 border-t border-gray-200">
      <%= render "shared/button", text: "Continue", variant: "primary", size: "medium", type: :submit %>
    </div>
  <% end %>
<% end %>
