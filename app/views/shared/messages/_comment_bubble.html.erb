<%#
  Comment/Reply Bubble Component

  Renders a single reply (legacy - now primarily using thread_display.html.erb)
  Kept for backwards compatibility
%>

<%
  sender_person = message.sender.is_a?(Person) ? message.sender : message.sender&.person
%>

<%# Facebook-style comment bubble with rounded-lg per CLAUDE.md %>
<div class="flex gap-2">
  <%= render "shared/messages/message_avatar", message: message, sender_person: sender_person, size: :small %>
  <div class="flex-1">
    <div class="bg-gray-100 rounded-2xl px-3 py-2 inline-block max-w-full">
      <span class="font-semibold text-gray-900 text-sm"><%= message.sender_name %></span>
      <p class="text-sm text-gray-800"><%= strip_tags(message.body.to_plain_text) %></p>
    </div>
    <div class="flex items-center gap-3 mt-1 ml-1 text-xs text-gray-500">
      <span><%= time_ago_in_words(message.created_at) %></span>
      <button class="font-semibold hover:underline">Reply</button>
    </div>
  </div>
</div>
