<% content_for :title, "Casting" %>

<div class="w-full">
  <%= render partial: "shared/notice", locals: { notice: notice } %>
  <%= render partial: "shared/top_menu", locals: {
    breadcrumbs: [
      ["Productions", productions_path],
      [@production.name, production_path(@production)]
    ],
    text: "Casting",
    links: [
      { text: "+ Add a Cast", path: new_production_cast_path(@production) }
    ]
  } %>


  <div id="casts" class="min-w-full divide-y divide-gray-200 space-y-5">
    <% if @casts.any? %>
      <% @casts.each do |cast| %>
        <div class="grid grid-cols-1 gap-1">

            <div class="flex items-center justify-between">
              <h1 class="font-bold text-2xl"><%= cast.name %></h1>
              <%= link_to "Edit", edit_production_cast_path(@production, cast), class: "inline-block px-3 py-1 bg-pink-500 text-white rounded hover:bg-pink-600 text-sm transition" %>
            </div>

          <div class="p-4 pb-6 border border-gray-200 rounded-lg hover:border-gray-400 transition-all">


            <div id="cast-members-list-<%= cast.id %>">
              <%= render 'casts/cast_members_list', cast: cast %>
            </div>

            <div>
              <h1 class="font-bold text-lg mb-1">Add a person to this cast:</h1>
              <%= render 'shared/people_search', url: search_people_path(format: :html), result_partial: 'casts/cast_person_grid_item', result_locals: { cast_id: cast.id } %>
            </div>

          </div>

        </div>
      <% end %>
    <% else %>
      <p class="text-center my-10">No casts found. <%= link_to "+ Add a Cast", new_production_cast_path(@production), class: "text-pink-500 underline" %></p>
    <% end %>
  </div>
</div>
