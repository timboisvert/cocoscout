<%#
  Questionnaire Item - displays a pending questionnaire

  Required params:
    - item: Hash with :questionnaire, :entity, :entity_key, :responded (boolean)
%>

<div class="bg-white border border-gray-200 rounded-lg px-4 py-3 flex items-center justify-between gap-4 hover:border-gray-300 transition-colors">
  <%# Left side: questionnaire info %>
  <div class="flex items-center gap-3 min-w-0">
    <%# Icon %>
    <div class="flex-shrink-0 w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center">
      <svg class="w-5 h-5 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
      </svg>
    </div>

    <%# Details %>
    <div class="min-w-0">
      <div class="font-medium text-gray-900 truncate"><%= item[:questionnaire].title %></div>
      <div class="text-sm text-gray-500 flex items-center gap-2">
        <span><%= item[:questionnaire].production.name %></span>
      </div>
    </div>
  </div>

  <%# Right side: action or status %>
  <div class="flex-shrink-0">
    <% if item[:responded] %>
      <span class="inline-flex items-center px-3 py-1.5 text-sm font-medium text-green-700 bg-green-100 rounded-full">
        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
        Completed
      </span>
    <% else %>
      <%= link_to my_questionnaire_form_path(token: item[:questionnaire].token), class: "inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-pink-600 rounded-lg hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 transition-colors" do %>
        Fill out
        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      <% end %>
    <% end %>
  </div>
</div>
