<%# Production row for payroll org-level list %>
<% production = summary[:production] %>
<% pending_runs_count = summary[:pending_runs_count] %>
<% pending_amount = summary[:pending_amount] %>
<% has_schedule = summary[:has_schedule] %>
<% next_pay_date = summary[:next_pay_date] %>

<%= link_to manage_money_production_payroll_path(production),
    class: "block bg-white rounded-lg border border-gray-200 hover:border-pink-300 hover:shadow-sm transition-all" do %>
  <div class="flex items-stretch">
    <%# Production Info %>
    <div class="flex-1 p-4">
      <div class="flex items-center gap-3">
        <% logo_variant = production.safe_logo_variant(:small) %>
        <% if logo_variant %>
          <%= image_tag logo_variant, class: "w-10 h-10 rounded-lg object-cover" %>
        <% else %>
          <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-pink-400 to-pink-600 flex items-center justify-center text-white font-bold text-sm">
            <%= production.initials %>
          </div>
        <% end %>
        <div>
          <h3 class="font-semibold text-gray-900"><%= production.name %></h3>
          <% if has_schedule %>
            <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700">
              <%= summary[:frequency]&.titleize %> Schedule
            </span>
          <% else %>
            <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600">
              No Schedule
            </span>
          <% end %>
        </div>
      </div>
    </div>

    <%# Pending Runs %>
    <div class="w-40 border-l border-gray-100 p-4 flex flex-col justify-center">
      <div class="text-xs text-gray-500 uppercase tracking-wide mb-1">Pending Runs</div>
      <div class="text-lg font-semibold <%= pending_runs_count > 0 ? 'text-amber-600' : 'text-gray-400' %>">
        <%= pending_runs_count %>
      </div>
      <% if pending_amount > 0 %>
        <div class="text-xs text-gray-500"><%= number_to_currency(pending_amount) %></div>
      <% end %>
    </div>

    <%# Next Pay Date %>
    <div class="w-40 border-l border-gray-100 p-4 flex flex-col justify-center">
      <div class="text-xs text-gray-500 uppercase tracking-wide mb-1">Next Pay Date</div>
      <% if next_pay_date %>
        <div class="text-lg font-semibold text-pink-600">
          <%= next_pay_date.strftime("%b %-d") %>
        </div>
        <div class="text-xs text-gray-500"><%= distance_of_time_in_words_to_now(next_pay_date) %></div>
      <% else %>
        <div class="text-gray-400">â€”</div>
      <% end %>
    </div>
  </div>
<% end %>
