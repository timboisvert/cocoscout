<% content_for :title, @production.name %>

<div class="w-full mb-10">
  <%= render partial: "shared/notice", locals: { notice: notice } %>
  <%= render partial: "shared/top_menu", locals: {
    breadcrumbs: [
      ["Productions", manage_productions_path]
    ],
    text: @production.name,
    links: [
      { text: "Edit", path: edit_manage_production_path(@production) }
    ]
  } %>


  <div class="flex flex-col md:flex-row gap-8">
    <div class="flex-1 space-y-2">
      <div class="flex items-center justify-between pb-2 mb-4 border-b border-gray-200">
        <h1 class="mb-2 font-bold text-lg coustard-regular">Logo</h1>
      </div>

      <% if @production.logo.attached? %>
        <%= image_tag @production.logo.variant(:small), class: "h-auto" %>
        <div>
          <%= link_to "Replace logo", edit_manage_production_path(@production), class: "text-pink-500 underline text-sm" %>
        </div>
      <% else %>
        <span class="text-sm text-gray-500">No logo added. <%= link_to "Upload a logo", edit_manage_production_path(@production), class: "text-pink-500 underline" %></span>
      <% end %>
    </div>

    <div class="flex-1 space-y-2">
      <div class="flex items-center justify-between pb-2 mb-4 border-b border-gray-200">
        <h1 class="mb-2 font-bold text-lg coustard-regular">Description</h1>
      </div>
      <div class="mb-5">
        <%= @production.description %>
      </div>
    </div>
  </div>

  <div class="w-full">
    <div class="space-y-2">
      <div class="flex items-center justify-between pb-2 mb-4 border-b border-gray-200">
        <h1 class="mb-2 font-bold text-lg coustard-regular">Contact Email</h1>
      </div>
      <div class="mb-5">
        <% if @production.contact_email.present? %>
          <%= mail_to @production.contact_email, @production.contact_email, class: "text-pink-500 underline" %>
        <% else %>
          <span class="text-sm text-gray-500">No contact email provided. <%= link_to "Add a contact email", edit_manage_production_path(@production), class: "text-pink-500 underline" %></span>
        <% end %>
      </div>
    </div>
  </div>

  <div class="w-full">

    <div class="flex items-center justify-between pb-2 mb-4 border-b border-gray-200 mt-10">
      <h1 class="font-bold text-lg coustard-regular">Posters</h1>
      <%= link_to "+ Add a Poster", new_manage_production_poster_path(@production), class: "inline-block px-4 py-2 bg-pink-500 text-white rounded hover:bg-pink-600 text-sm transition" %>
    </div>

    <% if @production.posters.any? %>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 w-full">
        <% @production.posters.each do |poster| %>
          <div class="bg-white rounded shadow p-4 flex flex-col">
            <% if poster.image.attached? %>
              <%= image_tag poster.image.variant(:small), class: "w-full h-auto object-cover mb-2" %>
            <% end %>
            <span class="font-semibold"><%= poster.name.presence || "Untitled Poster" %></span>
            <div class="flex gap-2 mt-2">
              <%= link_to "Edit", edit_manage_production_poster_path(@production, poster), class: "text-sm underline text-pink-500 hover:text-pink-600" %>
              <%= link_to "Delete",
                    manage_production_poster_path(@production, poster),
                    data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this poster?" },
                    class: "text-sm underline text-pink-500 hover:text-pink-600" %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-gray-500 text-sm mt-2">No posters added. <%= link_to "Add a Poster", new_manage_production_poster_path(@production), class: "text-pink-500 underline" %></div>
    <% end %>

  </div>


</div>
