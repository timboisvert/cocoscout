<% content_for :title, @organization.name %>

<div class="w-full" data-controller="tabs org-team-modals org-locations-settings org-messages">
  <%= render partial: "shared/notice", locals: { notice: notice } %>

  <%= render partial: "shared/top_menu", locals: {
    breadcrumbs: [
      ["Organizations", manage_organizations_path]
    ],
    text: @organization.name,
    links: []
  } %>

  <!-- Tabs Navigation -->
  <nav class="flex space-x-2 border-b border-gray-200 mb-4 overflow-x-auto mt-4">
    <button type="button" data-tabs-target="tab" data-index="0" data-action="tabs#select" class="px-4 py-2 text-sm font-medium bg-white border-b-2 text-pink-600 cursor-pointer whitespace-nowrap">Basic Information</button>
    <button type="button" data-tabs-target="tab" data-index="1" data-action="tabs#select" class="px-4 py-2 text-sm font-medium bg-gray-50 border-b-2 text-gray-500 cursor-pointer whitespace-nowrap">Organization Team Members</button>
    <button type="button" data-tabs-target="tab" data-index="2" data-action="tabs#select" class="px-4 py-2 text-sm font-medium bg-gray-50 border-b-2 text-gray-500 cursor-pointer whitespace-nowrap">Locations</button>
    <button type="button" data-tabs-target="tab" data-index="3" data-action="tabs#select" class="px-4 py-2 text-sm font-medium bg-gray-50 border-b-2 text-gray-500 cursor-pointer whitespace-nowrap">Messages</button>
    <% if @is_owner %>
      <button type="button" data-tabs-target="tab" data-index="4" data-action="tabs#select" class="px-4 py-2 text-sm font-medium bg-gray-50 border-b-2 text-red-500 cursor-pointer whitespace-nowrap">Danger Zone</button>
    <% end %>
  </nav>

  <!-- Tab 1: Basic Information -->
  <div data-tabs-target="panel">
    <div class="border border-gray-200 rounded-lg overflow-hidden">
      <%= render "shared/card_header", title: "Organization Details" %>
      <div class="p-6 bg-white">
        <%= form_with model: [:manage, @organization], method: :patch, class: "space-y-6" do |f| %>
          <% if @organization.errors.any? %>
            <div class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg">
              <ul class="list-disc ml-6">
                <% @organization.errors.each do |error| %>
                  <li><%= error.full_message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="sm:flex sm:space-x-5">
            <div class="w-full sm:w-1/2">
              <%= f.label :name, "Organization Name", class: "block text-sm font-medium text-gray-700" %>
              <%= f.text_field :name, class: "block shadow-sm rounded-lg border border-gray-400 px-3 py-2 mt-2 w-full focus:border-pink-500 focus:ring-pink-500" %>
            </div>
          </div>

          <!-- Logo Section -->
          <div class="border-t border-gray-200 pt-6">
            <h3 class="text-sm font-medium text-gray-700 mb-4">Organization Logo</h3>
            <div class="flex items-start gap-6">
              <div class="flex-shrink-0">
                <% if @organization.logo.attached? %>
                  <%= image_tag @organization.logo, alt: "#{@organization.name} Logo", class: "rounded shadow-sm object-contain max-h-[100px] max-w-[120px] border border-gray-200" %>
                <% else %>
                  <div class="w-[100px] h-[100px] rounded bg-gray-200 flex items-center justify-center border border-gray-300">
                    <span class="text-2xl font-bold text-gray-400"><%= @organization.name.split.map { |w| w[0] }.join.upcase.first(2) %></span>
                  </div>
                <% end %>
              </div>
              <div class="flex-1">
                <%= f.label :logo, class: "block text-sm font-medium text-gray-600 mb-2" do %>
                  <span class="cursor-pointer text-pink-500 underline">Choose a new logo...</span>
                <% end %>
                <%= f.file_field :logo, accept: "image/*", class: "hidden" %>
                <p class="text-xs text-gray-500">PNG, JPG, or GIF. Recommended size: 200x200 pixels or larger.</p>
                <% if @organization.logo.attached? %>
                  <div class="mt-2">
                    <%= button_to "Remove logo", remove_logo_manage_organization_path(@organization), method: :delete, data: { turbo: false, confirm: "Are you sure you want to remove the logo?" }, class: "text-xs text-pink-500 underline cursor-pointer" %>
                  </div>
                <% end %>
              </div>
            </div>
          </div>

          <div class="border-t border-gray-200 pt-6 flex justify-end">
            <%= render "shared/button", text: "Save Changes", variant: "primary", size: "medium", type: :submit %>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Tab 2: Organization Team Members -->
  <div data-tabs-target="panel" class="hidden">
    <%= render "shared/help_section",
      title: "About Organization Team Members",
      initial_state: "open",
      storage_key: "org_team_help_collapsed",
      steps: [
        { text: "Organization team members have global access to <strong>all productions</strong> in this organization." },
        { text: "<strong>Managers</strong> can create, edit, and manage all productions and settings. <strong>Viewers</strong> have read-only access." },
        { text: "For production-specific access, use the <strong>Team tab</strong> on individual production settings pages." }
      ] %>

    <div class="mt-4 space-y-1">
      <% @team_members.each do |member| %>
        <% organization_role = member.organization_roles.find { |r| r.organization_id == @organization.id } %>
        <% next unless organization_role&.company_role.in?(%w[manager viewer]) %>
        <div class="group flex items-stretch px-3 py-2 bg-white border border-gray-200 rounded-lg hover:border-gray-400 transition-all">
          <%# Left Section: Person Info %>
          <div class="w-1/2 flex items-center gap-3">
            <% if member.person&.headshot&.attached? %>
              <%= image_tag member.person.safe_headshot_variant(:thumb), class: "w-10 h-10 rounded-lg object-cover flex-shrink-0" %>
            <% else %>
              <div class="w-10 h-10 rounded-lg bg-gray-200 flex items-center justify-center flex-shrink-0">
                <span class="text-sm font-semibold text-gray-600">
                  <%= (member.person&.name || member.email_address).first.upcase %>
                </span>
              </div>
            <% end %>
            <div class="min-w-0">
              <div class="font-medium text-sm text-gray-900 truncate">
                <%= member.person&.name || member.email_address %>
                <% if member == Current.user %>
                  <span class="text-gray-500">(Me)</span>
                <% end %>
              </div>
              <div class="text-xs text-gray-500 truncate"><%= member.email_address %></div>
            </div>
          </div>
          <%# Right Section: Role %>
          <div class="w-1/2 border-l border-gray-200 pl-4 flex items-center justify-between">
            <div>
              <div class="text-[10px] text-gray-400 uppercase tracking-wide">Global Role</div>
              <div class="text-sm font-medium text-pink-500">
                <% if member.id == @organization.owner_id %>Owner, <% end %><%= organization_role&.company_role&.capitalize %>
              </div>
            </div>
            <% if (@is_owner || @role == "manager") && member != Current.user && member.id != @organization.owner_id %>
              <div class="opacity-0 group-hover:opacity-100 transition-opacity">
                <%= render "shared/button",
                    text: "Manage",
                    variant: "primary",
                    size: "small",
                    type: :button,
                    data: {
                      action: "click->org-team-modals#openPermissionsModal",
                      "member-id": member.id,
                      "member-name": member.person&.name || member.email_address,
                      "permissions-url": permissions_manage_team_path(id: member.id)
                    } %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>

      <% if @is_owner || @role == "manager" %>
        <% @team_invitations.each do |invite| %>
          <div class="group flex items-stretch px-3 py-2 border border-gray-200 rounded-lg hover:border-gray-400 transition-all">
            <%# Left Section: Person Info %>
            <div class="w-1/2 flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-yellow-100 flex items-center justify-center flex-shrink-0">
                <span class="text-sm font-semibold text-yellow-600">
                  <%= invite.email.first.upcase %>
                </span>
              </div>
              <div class="min-w-0">
                <div class="font-medium text-sm text-gray-900 truncate"><%= invite.email %></div>
                <div class="text-xs text-gray-500">Invited <%= time_ago_in_words(invite.created_at) %> ago</div>
              </div>
            </div>
            <%# Right Section: Status %>
            <div class="w-1/2 border-l border-gray-200 pl-4 flex items-center justify-between">
              <div>
                <div class="text-[10px] text-gray-400 uppercase tracking-wide">Status</div>
                <div class="text-sm font-medium text-yellow-600">Pending</div>
                <div class="text-xs text-gray-500">Awaiting response</div>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition-opacity">
                <%= form_with url: revoke_invite_manage_team_index_path(id: invite.id), method: :delete, data: { turbo: false, turbo_confirm: "Are you sure you want to revoke this invitation?" } do %>
                  <%= render "shared/button", text: "Revoke", variant: "primary", size: "small", type: :submit %>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

    <% if @is_owner || @role == "manager" %>
      <div class="border-t border-gray-200 pt-5 mt-8">
        <%= render "shared/button", text: "Invite Organization Team Member", variant: "secondary", size: "medium", type: :button, data: { action: "click->org-team-modals#openInviteModal" } %>
      </div>

      <!-- Invite Organization Team Member Modal -->
      <div data-org-team-modals-target="inviteModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full" data-action="click->org-team-modals#stopPropagation">
          <div class="px-6 py-4 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900 coustard-regular">Invite an Organization Team Member</h2>
          </div>
          <div class="p-6">
            <%= form_with(model: @team_invitation, url: invite_manage_team_index_path, method: :post, data: { turbo: false }) do |f| %>
              <div class="space-y-1">
                <div>
                  <%= f.label :email, "Email Address", class: "block text-sm font-medium text-gray-700 mb-2" %>
                  <%= f.email_field :email, placeholder: "email@example.com", autocapitalize: "none", class: "block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:border-pink-500 focus:ring-pink-500" %>
                </div>

                <div>
                  <%= f.label :invitation_subject, "Email Subject", class: "block text-sm font-medium text-gray-700 mb-2" %>
                  <%= f.text_field :invitation_subject, value: "You've been invited to join #{@organization.name}'s team on CocoScout", class: "block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:border-pink-500 focus:ring-pink-500" %>
                </div>

                <div>
                  <%= f.label :invitation_message, "Email Message", class: "block text-sm font-medium text-gray-700 mb-2" %>
                  <%= f.text_area :invitation_message, rows: 5, value: "Welcome to CocoScout!\n\n#{@organization.name} is using CocoScout to manage its productions. You've been invited to join the team.\n\nClick the link below to accept the invitation and sign in or create an account.", class: "block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:border-pink-500 focus:ring-pink-500" %>
                </div>
              </div>

              <div class="mt-6 flex justify-end gap-3">
                <%= render "shared/button", text: "Cancel", variant: "secondary", size: "medium", type: :button, data: { action: "click->org-team-modals#closeInviteModal" } %>
                <%= render "shared/button", text: "Send Invitation", variant: "primary", size: "medium", type: :submit %>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Manage Permissions Modal -->
      <div data-org-team-modals-target="permissionsModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4" data-action="click->org-team-modals#closePermissionsModal">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col" data-action="click->org-team-modals#stopPropagation">
          <div class="px-6 py-4 border-b border-gray-200 flex-shrink-0">
            <h2 data-org-team-modals-target="permissionsTitle" class="text-xl font-semibold text-gray-900 coustard-regular">Manage Permissions</h2>
          </div>
          <div data-org-team-modals-target="permissionsContent" class="p-6 overflow-y-auto">
            <p class="text-gray-500 text-center py-8">Loading...</p>
          </div>
          <div class="px-6 py-4 border-t border-gray-200 flex-shrink-0 flex justify-end">
            <%= render "shared/button", text: "Close", variant: "secondary", size: "medium", type: :button, data: { action: "click->org-team-modals#closePermissionsModal" } %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Tab 3: Locations -->
  <div data-tabs-target="panel" class="hidden">
    <%= render "shared/help_section",
      title: "About Locations",
      initial_state: "open",
      storage_key: "org_locations_help_collapsed",
      steps: [
        { text: "Locations are venues where your shows, rehearsals, and events take place." },
        { text: "Set a default location to automatically pre-fill it when scheduling new events." },
        { text: "Locations are shared across all productions in this organization." }
      ] %>

    <% if @locations.any? %>
      <div class="grid grid-cols-1 gap-2 mt-4">
        <% @locations.each do |location| %>
          <div class="p-4 bg-white border border-gray-200 rounded-lg hover:border-gray-400 transition-all flex items-top">
            <div class="flex-1">
              <div class="font-bold text-md">
                <%= location.name %>
                <% if location.default? %>
                  <span class="text-sm font-normal text-gray-500">(Default)</span>
                <% end %>
              </div>
              <div class="text-sm text-gray-500"><%= location.address1 %></div>
              <% if location.address2.present? %>
                <div class="text-sm text-gray-500"><%= location.address2 %></div>
              <% end %>
              <div class="text-sm text-gray-500"><%= location.city %>, <%= location.state %> <%= location.postal_code %></div>
              <% if @is_owner || @role == "manager" %>
                <div class="mt-2">
                  <button type="button" data-action="click->org-locations-settings#openEditModal" data-location-id="<%= location.id %>" data-location-name="<%= location.name %>" data-location-address1="<%= location.address1 %>" data-location-address2="<%= location.address2 %>" data-location-city="<%= location.city %>" data-location-state="<%= location.state %>" data-location-postal-code="<%= location.postal_code %>" data-location-notes="<%= location.notes %>" data-location-default="<%= location.default? %>" data-edit-path="<%= manage_location_path(location) %>" class="text-pink-500 text-xs underline cursor-pointer">Edit Location</button>
                  <%= button_to "Delete Location", manage_location_path(location), method: :delete, data: { turbo: false, confirm: "Are you sure you want to delete this location?" }, class: "ml-2 text-pink-500 text-xs underline cursor-pointer", form: { class: "inline" } %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-500 text-sm">No locations have been added yet.</p>
    <% end %>

    <% if @is_owner || @role == "manager" %>
      <div class="border-t border-gray-200 pt-5 mt-8">
        <%= render "shared/button", text: "Add Location", variant: "secondary", size: "medium", type: :button, data: { action: "click->org-locations-settings#openAddModal" } %>
      </div>

      <!-- Add Location Modal -->
      <div data-org-locations-settings-target="addModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" data-action="click->org-locations-settings#stopPropagation">
          <div class="sticky top-0 bg-white px-6 py-4 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900 coustard-regular">Add a Location</h2>
          </div>
          <div class="p-6">
            <form data-org-locations-settings-target="addForm" action="<%= manage_locations_path %>" method="post" data-action="submit->org-locations-settings#submitAddForm">
              <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
              <div data-org-locations-settings-target="addErrorContainer" class="hidden bg-pink-50 px-3 py-2 font-medium rounded-md mb-4">
                <ul data-org-locations-settings-target="addErrorList" class="list-disc ml-6"></ul>
              </div>
              <%= render "manage/organizations/location_form_fields" %>
              <div class="flex justify-end gap-3 pt-4">
                <%= render "shared/button", text: "Cancel", variant: "secondary", size: "medium", type: :button, data: { action: "click->org-locations-settings#closeAddModal" } %>
                <%= render "shared/button", text: "Add Location", variant: "primary", size: "medium", type: :submit %>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Edit Location Modal -->
      <div data-org-locations-settings-target="editModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" data-action="click->org-locations-settings#stopPropagation">
          <div class="sticky top-0 bg-white px-6 py-4 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900 coustard-regular">Edit Location</h2>
          </div>
          <div class="p-6">
            <form data-org-locations-settings-target="editForm" action="" method="post" data-action="submit->org-locations-settings#submitEditForm">
              <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
              <input type="hidden" name="_method" value="patch">
              <input type="hidden" data-org-locations-settings-target="editLocationId" name="location[id]" value="">
              <div data-org-locations-settings-target="editErrorContainer" class="hidden bg-pink-50 px-3 py-2 font-medium rounded-md mb-4">
                <ul data-org-locations-settings-target="editErrorList" class="list-disc ml-6"></ul>
              </div>
              <%= render "manage/organizations/location_form_fields", prefix: "edit" %>
              <div class="flex justify-end gap-3 pt-4">
                <%= render "shared/button", text: "Cancel", variant: "secondary", size: "medium", type: :button, data: { action: "click->org-locations-settings#closeEditModal" } %>
                <%= render "shared/button", text: "Update Location", variant: "primary", size: "medium", type: :submit %>
              </div>
            </form>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Tab 4: Messages -->
  <div data-tabs-target="panel" class="hidden">
    <div class="border border-gray-200 rounded-lg overflow-hidden">
      <%= render "shared/card_header", title: "Message Board Settings" %>
      <div class="p-6 bg-white space-y-6">
        <p class="text-sm text-gray-600">
          Configure how message boards work for your organization's productions.
        </p>

        <%= form_with model: [:manage, @organization], method: :patch, data: { turbo: false } do |f| %>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Forum Mode</label>
              <div class="space-y-2">
                <label class="flex items-start gap-3 cursor-pointer">
                  <%= f.radio_button :forum_mode, "per_production", class: "mt-1 h-4 w-4 text-pink-600 border-gray-300 focus:ring-pink-500 accent-pink-600" %>
                  <div>
                    <span class="text-sm font-medium text-gray-900">One forum per production</span>
                    <p class="text-xs text-gray-500">Each production has its own separate message board.</p>
                  </div>
                </label>
                <label class="flex items-start gap-3 cursor-pointer">
                  <%= f.radio_button :forum_mode, "shared", class: "mt-1 h-4 w-4 text-pink-600 border-gray-300 focus:ring-pink-500 accent-pink-600" %>
                  <div>
                    <span class="text-sm font-medium text-gray-900">Shared forum</span>
                    <p class="text-xs text-gray-500">All productions share one organization-wide message board.</p>
                  </div>
                </label>
              </div>
            </div>

            <div class="pt-4">
              <%= render "shared/button", text: "Save Changes", variant: "primary", size: "medium", type: :submit %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <% if @organization.forum_per_production? && @productions.any? %>
      <div class="border border-gray-200 rounded-lg overflow-hidden mt-6">
        <%= render "shared/card_header", title: "Production Forum Settings" %>
        <div class="p-6 bg-white">
          <p class="text-sm text-gray-600 mb-4">
            Enable or disable the message board for individual productions.
          </p>

          <div class="space-y-2">
            <% @productions.each do |production| %>
              <div class="flex items-center justify-between py-2 px-3 border border-gray-200 rounded-lg">
                <div class="flex items-center gap-3">
                  <% if production.logo.attached? %>
                    <%= image_tag production.safe_logo_variant(:small), alt: production.name, class: "w-8 h-8 object-contain rounded" %>
                  <% else %>
                    <div class="w-8 h-8 rounded bg-pink-100 flex items-center justify-center">
                      <span class="text-xs font-bold text-pink-600"><%= production.initials %></span>
                    </div>
                  <% end %>
                  <span class="text-sm font-medium text-gray-900"><%= production.name %></span>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox"
                         class="sr-only peer"
                         <%= "checked" if production.forum_enabled? %>
                         data-action="change->org-messages#toggleProduction"
                         data-production-id="<%= production.id %>"
                         data-url="<%= toggle_production_forum_manage_organization_path(@organization, production_id: production.id) %>">
                  <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-pink-100 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pink-500"></div>
                </label>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Tab 5: Danger Zone (Owner only) -->
  <% if @is_owner %>
    <div data-tabs-target="panel" class="hidden">
      <!-- Transfer Ownership Section -->
      <% if @team_members.count > 1 %>
        <div class="border border-gray-200 rounded-lg overflow-hidden mb-6">
          <div class="bg-yellow-50 px-4 py-3 border-b border-yellow-200">
            <h2 class="text-lg font-semibold text-yellow-800 coustard-regular">Transfer Ownership</h2>
          </div>
          <div class="p-6 bg-white">
            <p class="text-sm text-gray-600 mb-4">
              Transfer ownership of this organization to another manager. You will remain a manager but will lose owner privileges.
            </p>

            <%= form_with url: transfer_ownership_manage_organization_path(@organization), method: :post, class: "space-y-4" do |f| %>
              <div class="sm:w-1/2">
                <%= f.label :new_owner_id, "New Owner", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= f.select :new_owner_id,
                    options_from_collection_for_select(
                      @team_members.select { |u| u.organization_roles.exists?(organization: @organization, company_role: 'manager') && u.id != Current.user.id },
                      :id,
                      ->(u) { u.person&.name || u.email_address }
                    ),
                    { prompt: "Select new owner..." },
                    { class: "block w-full rounded-lg border border-gray-400 px-3 py-2 shadow-sm focus:border-pink-500 focus:ring-pink-500" } %>
              </div>

              <div class="pt-2">
                <%= render "shared/button",
                           text: "Transfer Ownership",
                           variant: "secondary",
                           size: "medium",
                           type: :submit,
                           data: { turbo_confirm: "Are you sure you want to transfer ownership? This action cannot be undone." } %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>

      <!-- Delete Organization Section -->
      <div class="bg-red-50 border border-red-200 rounded-lg p-6">
        <div class="flex items-start gap-4">
          <div class="flex-shrink-0">
            <svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
            </svg>
          </div>
          <div class="flex-1">
            <h3 class="text-lg font-semibold text-red-800 mb-2">Delete this Organization</h3>
            <p class="text-sm text-red-700 mb-4">
              Deleting this organization is <strong>permanent and cannot be undone</strong>. This action will remove the organization and all associated productions, shows, talent pool, and data from the system.
            </p>
            <p class="text-sm text-red-700 mb-4">
              Before deleting, please review what will be removed. You'll be asked to confirm on the next page.
            </p>
            <div class="mt-6">
              <%= render "shared/button",
                  text: "Delete this organization",
                  variant: "danger",
                  size: "medium",
                  path: confirm_delete_manage_organization_path(@organization),
                  icon: "trash" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
