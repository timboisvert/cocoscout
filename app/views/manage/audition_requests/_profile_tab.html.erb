<%# Profile tab content for audition request show page %>
<%# Shows profile info without headshot (moved to Headshots tab) and without email (in hero) %>

<% if person.nil? %>
  <div class="p-6 text-center text-gray-500">
    <p>This person is no longer available.</p>
  </div>
<% else %>
  <div class="">
    <div class="flex flex-col lg:flex-row items-start lg:space-x-6">
      <div class="flex-1 w-full">
        <%# Socials Box (email is in hero now) %>
        <div class="border border-gray-200 rounded-lg overflow-hidden mb-4">
          <%= render "shared/card_header", title: "Socials" %>
          <div class="p-4">
            <% if person.socials.any? %>
              <div class="space-y-1">
                <% person.socials.each do |social| %>
                  <div class="flex items-center space-x-2">
                    <%= social.icon(20) %>
                    <%= link_to social.handle, social.url, class: "text-pink-500 text-sm hover:underline", target: "_blank", rel: "noopener" %>
                  </div>
                <% end %>
              </div>
            <% else %>
              <p class="text-sm text-gray-500">No socials added</p>
            <% end %>
          </div>
        </div>

        <% if current_user_can_manage? && @audition_request.present? %>
          <%# Actions Box %>
          <div class="border border-gray-200 rounded-lg overflow-hidden mb-4">
            <%= render "shared/card_header", title: "Actions" %>
            <div class="p-4 space-y-2">
              <% if @audition_request.archived? %>
                <div class="p-3 bg-amber-50 border border-amber-200 rounded-lg mb-2">
                  <p class="text-sm text-amber-800">
                    <%= icon("archive-box", class: "w-4 h-4 inline mr-1") %>
                    This sign-up was archived on <%= @audition_request.archived_at.strftime("%b %-d, %Y") %>
                  </p>
                </div>
                <%= link_to "Restore Sign-up",
                    manage_unarchive_signups_auditions_cycle_request_path(@production, @audition_cycle, @audition_request),
                    data: { turbo_method: :post, turbo_confirm: "Are you sure you want to restore this sign-up? It will appear in the active sign-ups list again." },
                    class: "text-sm text-pink-500 hover:underline" %>
              <% else %>
                <%= link_to "Archive Sign-up",
                    manage_archive_signups_auditions_cycle_request_path(@production, @audition_cycle, @audition_request),
                    data: { turbo_method: :post, turbo_confirm: "Are you sure you want to archive this sign-up? They will be removed from the active sign-ups list but their request will be preserved." },
                    class: "block text-sm text-pink-500 hover:underline" %>
              <% end %>

              <%= link_to "Delete Sign-up",
                  manage_signups_auditions_cycle_request_path(@production, @audition_cycle, @audition_request),
                  data: { turbo_method: :delete, turbo_confirm: "⚠️ PERMANENTLY DELETE this sign-up?\n\nThis will completely remove their audition request, answers, votes, and all associated data. This cannot be undone.\n\nIf you just want to remove them from the active list, use 'Archive' instead." },
                  class: "block text-sm text-pink-500 hover:underline" %>
            </div>
          </div>
        <% end %>

        <% if Current.user&.superadmin? %>
          <%# Superadmin Actions Box %>
          <div class="border border-gray-200 rounded-lg overflow-hidden mb-4">
            <%= render "shared/card_header", title: "Superadmin Actions" %>
            <div class="p-4 space-y-2">
              <% if person.user %>
                <%= button_to impersonate_user_path, method: :post, params: { email: person.user.email_address }, class: "text-sm text-pink-500 hover:underline cursor-pointer" do %>
                  Impersonate
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>

      </div>
    </div>
  </div>
<% end %>
