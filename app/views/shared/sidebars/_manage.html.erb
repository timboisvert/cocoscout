
<nav class="w-56 bg-white border-r border-r-2 border-gray-200 flex flex-col transition-all duration-200 ease-in-out z-20 justify-between fixed left-0 top-0 h-screen">
  <div>

    <%= link_to manage_path, class: "mb-2" do %>
      <h1 class="p-5 pb-3 text-3xl coustard-regular text-pink-500">CocoScout</h1>
    <% end %>

    <div class="<%= 'pt-[40px]' if session[:impersonate_user_id] %>">
      <% if Current.production.present? && !Current.production.new_record? %>
        <%= link_to Current.production.name, manage_production_path(Current.production), class: "flex items-center gap-3 px-5 py-2 hover:bg-pink-500 hover:text-white transition-all font-medium" %>

        <%
        links = [
          {"Shows" => manage_production_shows_path(Current.production)},
          {"Casting" => manage_production_casts_path(Current.production)},
          {"Roles" => manage_production_roles_path(Current.production)},
          {"Auditions" => manage_production_auditions_path(Current.production)}
        ]
        %>

        <% links.each do |item| %>
          <%= link_to item.keys.first, item.values.first, class: "block px-8 py-2 hover:bg-pink-100 hover:text-pink-700 transition-all text-sm" %>
        <% end %>

      <% else %>
        <%= link_to "Productions", manage_productions_path, class: "flex items-center gap-3 px-5 py-2 hover:bg-pink-500 hover:text-white transition-all font-medium" %>
      <% end %>

      <%= link_to "People", manage_people_path, class: "flex items-center gap-3 px-5 py-2 hover:bg-pink-500 hover:text-white transition-all font-medium" %>
      <%= link_to "Team", manage_team_index_path, class: "flex items-center gap-3 px-5 py-2 hover:bg-pink-500 hover:text-white transition-all font-medium" %>
      <%= link_to "Locations", manage_locations_path, class: "flex items-center gap-3 px-5 py-2 hover:bg-pink-500 hover:text-white transition-all font-medium" %>
    </div>

    <div class="mt-20">

      <% if Current.user.can_manage? %>
        <%= link_to "My", my_dashboard_path, class: "block px-8 py-2 hover:bg-pink-100 hover:text-pink-700 transition-all text-sm" %>
      <% end %>
    </div>


  </div>

  <!-- Bottom section -->
  <div>

    <div class="flex justify-center">
      <%= image_tag "cocoscout.png", alt: "CocoScout Logo", class: "w-32" %>
    </div>

    <div class="px-4 py-6 border-t-4 border-pink-400 text-xs text-gray-500">
      <% if Current.user %>
        <div class="font-semibold text-gray-700 truncate">
          <%= Current.user.email_address %>
          <span class="text-gray-500"><%= link_to "Sign out", signout_path, class: "text-pink-500 underline", data: { turbo_prefetch: false } %></span>
        </div>
        <div class="font-medium text-gray-700 mt-2">
          <%= link_to Current.production_company.name, select_manage_production_companies_path, class: "text-pink-500 font-bold underline text-xs" %> &gt;
        </div>

      <% else %>
        <div class="italic">Not signed in</div>
      <% end %>
    </div>

  </div>

</nav>