<%#
  Module Header Component (New Header)
  A module-level header with large title (coustard-regular), multi-line description,
  and action buttons arranged in a 2x2 grid (4 buttons) or 2+1 layout (3 buttons).

  This is the "new header" style - use for major module landing pages like Casting, Money, etc.

  Usage:
    render "shared/module_header",
      title: "Casting",
      description: "<p>First paragraph...</p><p>Second paragraph...</p>",
      actions: [
        { icon: "calendar", text: "Availability", description: "Track who can make each show", path: some_path },
        { icon: "clipboard-list", text: "Roles", description: "Define positions to fill", path: roles_path },
        { icon: "user-group", text: "Talent Pool", description: "Manage who can be cast", path: talent_pool_path },
        { icon: "cog", text: "Settings", description: "Configure casting options", path: settings_path }
      ]

  Icons supported: calendar, clipboard-list, user-group, cog, users, chart-bar, dollar-sign
%>
<% actions ||= [] %>

<div class="pt-2 mb-6">
  <%# Row 1: Title %>
  <h1 class="text-4xl coustard-regular text-gray-900"><%= title %></h1>

  <%# Row 2: Description on left, Action buttons on right %>
  <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4 mt-4">
    <%# Left side: Description %>
    <% if local_assigns[:description] && description.present? %>
      <div class="flex-1 text-sm text-gray-600 max-w-2xl space-y-2">
        <%= raw description %>
      </div>
    <% end %>

    <%# Right side: Action buttons %>
    <% if actions.any? %>
      <div class="flex-shrink-0">
        <% if actions.length == 4 %>
          <%# 4 buttons: 2x2 grid %>
          <div class="grid grid-cols-2 gap-2">
            <% actions.each do |action| %>
              <%= link_to action[:path], class: "flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200" do %>
                <div class="w-10 h-10 rounded-lg bg-pink-100 flex items-center justify-center flex-shrink-0">
                  <%= render "shared/module_header_icon", icon: action[:icon] %>
                </div>
                <div class="flex-1">
                  <div class="font-medium text-gray-900"><%= action[:text] %></div>
                  <% if action[:description].present? %>
                    <div class="text-xs text-gray-500"><%= action[:description] %></div>
                  <% end %>
                </div>
              <% end %>
            <% end %>
          </div>
        <% elsif actions.length == 3 %>
          <%# 3 buttons: 2 on top, 1 below spanning full width %>
          <div class="space-y-2">
            <div class="grid grid-cols-2 gap-2">
              <% actions.first(2).each do |action| %>
                <%= link_to action[:path], class: "flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200" do %>
                  <div class="w-10 h-10 rounded-lg bg-pink-100 flex items-center justify-center flex-shrink-0">
                    <%= render "shared/module_header_icon", icon: action[:icon] %>
                  </div>
                  <div class="flex-1">
                    <div class="font-medium text-gray-900"><%= action[:text] %></div>
                    <% if action[:description].present? %>
                      <div class="text-xs text-gray-500"><%= action[:description] %></div>
                    <% end %>
                  </div>
                <% end %>
              <% end %>
            </div>
            <% action = actions.last %>
            <%= link_to action[:path], class: "flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200 w-full" do %>
              <div class="w-10 h-10 rounded-lg bg-pink-100 flex items-center justify-center flex-shrink-0">
                <%= render "shared/module_header_icon", icon: action[:icon] %>
              </div>
              <div class="flex-1">
                <div class="font-medium text-gray-900"><%= action[:text] %></div>
                <% if action[:description].present? %>
                  <div class="text-xs text-gray-500"><%= action[:description] %></div>
                <% end %>
              </div>
            <% end %>
          </div>
        <% else %>
          <%# 1-2 buttons or 5+ buttons: vertical stack %>
          <div class="space-y-2">
            <% actions.each do |action| %>
              <%= link_to action[:path], class: "flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200" do %>
                <div class="w-10 h-10 rounded-lg bg-pink-100 flex items-center justify-center flex-shrink-0">
                  <%= render "shared/module_header_icon", icon: action[:icon] %>
                </div>
                <div class="flex-1">
                  <div class="font-medium text-gray-900"><%= action[:text] %></div>
                  <% if action[:description].present? %>
                    <div class="text-xs text-gray-500"><%= action[:description] %></div>
                  <% end %>
                </div>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

