<%# Partial for displaying a directory entry as a list item %>
<div class="flex items-center gap-1.5 p-1.5 rounded border border-gray-200 hover:border-pink-300 hover:bg-pink-50 transition group"
     data-directory-selection-target="item"
     data-entry-id="<%= entry.id %>"
     data-entry-type="<%= entry.class.name %>"
     data-entry-name="<%= entry.name %>"
     data-action="click->directory-selection#clickItem">

  <%# Checkbox for bulk selection - hidden by default %>
  <input type="checkbox"
         class="hidden flex-shrink-0 w-4 h-4 rounded accent-pink-500 border-gray-300 text-pink-600 focus:ring-pink-500 cursor-pointer"
         data-directory-selection-target="checkbox"
         data-action="change->directory-selection#toggleCheckbox click->directory-selection#preventNavigation">

  <%= link_to (entry.is_a?(Person) ? manage_person_path(entry) : manage_group_path(entry)),
          data: { turbo_frame: "_top", directory_selection_target: "link" },
          class: "flex items-center gap-1.5 flex-1 min-w-0" do %>
    <%# Headshot %>
    <div class="flex-shrink-0 w-7 h-7 rounded overflow-hidden bg-gray-100">
      <% if entry.headshot&.attached? %>
        <%= image_tag entry.safe_headshot_variant(:thumb),
                      class: "w-full h-full object-cover",
                      loading: "lazy",
                      alt: entry.name %>
      <% else %>
        <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200">
          <% if entry.is_a?(Person) %>
            <div class="text-xs font-bold text-gray-500">
              <%= entry.name.split.map(&:first).join.upcase %>
            </div>
          <% else %>
            <svg class="w-3.5 h-3.5 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-7 8c0-2.66 5.33-4 8-4s8 1.34 8 4v2H5v-2zm10-8c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.21 0-.41.02-.61.05A5.978 5.978 0 0117 8c0 2.31-1.31 4.31-3.22 5.32.63-.13 1.3-.2 2-.2 2.67 0 8 1.34 8 4v2h-4v-2.12c-.65-.68-2.05-1.36-3.78-1.7-.92-.16-1.84-.28-2.77-.28z"/>
            </svg>
          <% end %>
        </div>
      <% end %>
    </div>

    <%# Name %>
    <div class="flex-1 min-w-0">
      <h3 class="text-xs font-medium text-gray-900 group-hover:text-pink-600 transition truncate">
        <%= entry.name %>
      </h3>
    </div>
  <% end %>
</div>
