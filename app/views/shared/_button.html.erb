<%
  # Button component for profile and groups pages
  #
  # Usage Examples:
  #   render "shared/button", text: "View Public Profile", variant: "primary", icon: "eye"
  #   render "shared/button", text: "Share Profile", variant: "outline", icon: "share"
  #   render "shared/button", text: "Add Social Media/Link", variant: "outline-pink", icon: "plus"
  #   render "shared/button", text: "Save Changes", variant: "primary", size: "medium"
  #   render "shared/button", text: "Cancel", variant: "ghost-cancel", size: "medium"
  #   render "shared/button", text: "Check Availability", variant: "primary"
  #   render "shared/button", path: root_path, text: "Go Home", variant: "primary"
  #
  # Parameters:
  #   text (required): Button text/label
  #   variant: Button style variant (see options below)
  #   size: "small", "medium" (default), "large"
  #   icon: Icon name (optional) - renders before text
  #   type: :submit (default), :button, :link
  #   path: URL path (for link_to rendering)
  #   target: Link target (e.g., "_blank")
  #   rel: Link rel attribute (e.g., "noopener")
  #   data: Hash of data attributes
  #   classes: Additional custom classes
  #   onclick: JavaScript onclick handler
  #
  # Variant Options:
  #   "primary" - Pink filled button (bg-pink-500 hover:bg-pink-600)
  #   "outline" - White with gray border (border-gray-300 hover:border-pink-500)
  #   "outline-pink" - White with pink border (border-pink-200 hover:border-pink-300)
  #   "ghost" - Text only, no border (text-gray-700 hover:bg-gray-100)
  #   "ghost-cancel" - Cancel text style (text-gray-700 hover:text-gray-900)

  text = local_assigns[:text] || ""
  variant = local_assigns[:variant] || "primary"
  size = local_assigns[:size] || "medium"
  type = local_assigns[:type] || :submit
  classes = local_assigns[:classes] || ""
  data = local_assigns[:data] || {}
  icon = local_assigns[:icon]
  path = local_assigns[:path]
  target = local_assigns[:target]
  rel = local_assigns[:rel]
  onclick = local_assigns[:onclick]

  # Base classes for all buttons
  base_classes = "inline-flex items-center justify-center gap-2 font-medium rounded-lg transition-colors cursor-pointer"

  # Variant-specific classes
  variant_classes = case variant
    when "primary"
      "bg-pink-500 hover:bg-pink-600 text-white"
    when "outline"
      "bg-white border-2 border-gray-300 hover:border-pink-500 hover:bg-pink-50 text-gray-700 hover:text-pink-600 transition-all"
    when "outline-pink"
      "bg-white hover:bg-pink-50 text-pink-600 border border-pink-200 hover:border-pink-300 transition-all"
    when "ghost"
      "text-gray-700 hover:bg-gray-100"
    when "ghost-cancel"
      "text-gray-700 hover:text-gray-900"
    else
      "bg-pink-500 hover:bg-pink-600 text-white"
  end

  # Size-specific padding and text size
  size_classes = case size
    when "small"
      "px-3 py-1.5 text-sm"
    when "medium"
      "px-4 py-2 text-sm"
    when "large"
      "px-6 py-2 text-sm"
    else
      "px-4 py-2 text-sm"
  end

  # Icon size based on button size
  icon_size = case size
    when "small"
      "w-4 h-4"
    when "medium", "large"
      "w-5 h-5"
    else
      "w-5 h-5"
  end

  # Combine all classes
  all_classes = "#{base_classes} #{variant_classes} #{size_classes} #{classes}".strip

  # Icon SVG paths
  icons = {
    "eye" => '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ICON_SIZE"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>',
    "share" => '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ICON_SIZE"><path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z" /></svg>',
    "plus" => '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ICON_SIZE"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>'
  }

  # Get icon HTML if specified
  icon_html = if icon && icons[icon]
    icons[icon].gsub("ICON_SIZE", icon_size).html_safe
  else
    nil
  end

  # Build data attributes string
  data_attrs = data.map { |k, v| "data-#{k.to_s.dasherize}=\"#{v}\"" }.join(' ')
%>

<% if path.present? %>
  <%= link_to path, class: all_classes, data: data, target: target, rel: rel, onclick: onclick do %>
    <%= icon_html if icon_html %>
    <span><%= text %></span>
  <% end %>
<% elsif type == :submit %>
  <%= submit_tag text, class: all_classes, data: data, onclick: onclick do %>
    <%= icon_html if icon_html %>
  <% end %>
<% else %>
  <button type="<%= type %>" class="<%= all_classes %>" <%= data_attrs.html_safe if data.any? %> <%= "onclick=\"#{onclick}\"" if onclick %>>
    <%= icon_html if icon_html %>
    <span><%= text %></span>
  </button>
<% end %>
