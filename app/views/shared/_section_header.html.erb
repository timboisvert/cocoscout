<div class="bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between">
  <div class="flex items-center gap-3">
    <% if local_assigns[:collapsible] %>
      <button type="button"
              data-action="click->profile-section#toggle"
              class="text-gray-600 hover:text-gray-900 focus:outline-none">
        <svg class="w-5 h-5 transform transition-transform"
             data-profile-section-target="icon"
             fill="none"
             stroke="currentColor"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
    <% end %>

    <h3 class="text-md font-semibold text-gray-900 coustard-regular">
      <%= title %>
    </h3>
  </div>

  <% if local_assigns[:visibility_toggle] && local_assigns[:visibility_field].present? %>
    <div data-controller="visibility-toggle"
         data-visibility-toggle-url-value="<%= update_profile_visibility_path %>"
         data-visibility-toggle-field-value="<%= local_assigns[:visibility_field] %>">
      <label class="flex items-center gap-2 text-sm text-gray-700 cursor-pointer">
        <span class="mr-2">Show on profile</span>
        <div class="relative inline-flex items-center">
          <input type="checkbox"
                 <%= "checked" if local_assigns.fetch(:visibility_checked, true) %>
                 class="sr-only peer"
                 data-action="change->visibility-toggle#toggle">
          <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-pink-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pink-500"></div>
        </div>
      </label>
    </div>
  <% end %>
</div>