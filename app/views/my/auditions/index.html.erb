
<h1 class="mt-10 text-lg font-semibold">Audition Requests</h1>

<% if @audition_requests.present? %>
	<div class="grid grid-cols-1 gap-2 mt-2">
        <% @audition_requests.each do |audition_request| %>
            <div class="p-4 border border-gray-200 rounded-lg hover:border-gray-400 transition-all flex items-top">

                <% production = audition_request.call_to_audition.production %>

                <div class="grid grid-cols-5 gap-2 w-full">
                    <div class="col-span-3 items-center">
                        <div class="flex items-center">
                            <% if production.logo.attached? %>
                                <div class="mr-4">
                                    <%= image_tag production.logo.variant(:small), alt: "#{production.name} logo", class: "w-[100px] object-contain rounded" %>
                                </div>
                            <% end %>
                            <div>
                                <div class="font-bold text-xl"><%= production.name %></div>
                                <div class="text-xs text-gray-500">Submitted on <%= audition_request.updated_at.strftime('%b %d, %Y') %></div>

                                <% if audition_request.call_to_audition.timeline_status == :open %>
                                    <%= link_to "Edit my Audition Request", my_respond_to_call_to_audition_form_path(audition_request.call_to_audition.token), class: "text-xs text-pink-500 underline", target: "_blank" %>
                                <% elsif audition_request.call_to_audition.timeline_status == :closed %>
                                    <div class="text-xs text-gray-500 mt-1">Call to Audition closed on <%= audition_request.call_to_audition.closes_at.strftime('%b %d, %Y') %></div>
                                <% end %>
                            </div>
                        </div>
                    </div>
                    <div class="col-span-2 flex flex-col justify-center items-start">
                        <div class="text-lg"><%= friendly_request_status_name(audition_request)%></div>
                        <div class="text-sm text-gray-500 mt-1"><%= friendly_request_status_text(audition_request) %></div>
                    </div>
                </div>
            </div>
        <% end %>
    </div>
<% else %>
	<p>You have not submitted any audition requests yet.</p>
<% end %>
