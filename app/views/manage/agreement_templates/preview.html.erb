<% content_for :title, "Preview: #{@agreement_template.name}" %>

<div class="w-full mb-10">
  <%= render partial: "shared/notice", locals: { notice: notice, alert: alert } %>
  <%= render partial: "shared/top_menu", locals: {
    breadcrumbs: [
      ["Organizations", manage_organizations_path],
      [@organization.name, manage_organization_path(@organization)],
      ["Agreement Templates", manage_agreement_templates_path],
      [@agreement_template.name, edit_manage_agreement_template_path(@agreement_template)]
    ],
    text: "Preview"
  } %>

  <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
    <div class="flex items-start gap-3">
      <svg class="w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
      </svg>
      <div>
        <p class="text-sm font-medium text-yellow-800">Preview Mode</p>
        <p class="text-sm text-yellow-700">This preview uses sample data. Variables like performer name and production will be replaced with real values when displayed to performers.</p>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
      <h2 class="text-lg font-semibold text-gray-900"><%= @agreement_template.name %></h2>
      <p class="text-sm text-gray-500">Version <%= @agreement_template.version %></p>
    </div>

    <div class="p-6">
      <div class="prose prose-sm max-w-none [&_ul]:list-disc [&_ul]:pl-5 [&_ol]:list-decimal [&_ol]:pl-5 [&_li]:my-1">
        <%= @rendered_content %>
      </div>
    </div>
  </div>

  <div class="mt-6">
    <%= link_to edit_manage_agreement_template_path(@agreement_template) do %>
      <%= render "shared/button", text: "Back to Edit", variant: "secondary" %>
    <% end %>
  </div>
</div>
