<%# Linked Events Management Partial %>
<%# Shows the current linkage status with a button to open modal for editing %>

<div data-controller="show-linkage"
     data-show-linkage-show-id-value="<%= show.id %>"
     data-show-linkage-production-id-value="<%= production.id %>">

  <% if show.linked? %>
    <%= render "manage/shows/linked_events_list", show: show, production: production %>

    <%= render "shared/button",
            text: "Manage Linked Events",
            variant: "primary",
            type: :button,
            data: { action: "click->show-linkage#openModal" } %>

  <% else %>
    <%# Not linked - show empty state with button to open modal %>
    <div class="text-center py-8">
      <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
      </svg>
      <h3 class="mt-2 text-sm font-medium text-gray-900">No linked events</h3>
      <p class="mt-1 text-sm text-gray-500">Link this event with other shows or rehearsals to manage them together.</p>

      <div class="mt-6">
        <%= render "shared/button",
                text: "Link Events",
                variant: "primary",
                type: :button,
                data: { action: "click->show-linkage#openModal" } %>
      </div>
    </div>
  <% end %>

  <%# Modal for managing linkages %>
  <%= render "manage/shows/linked_events_modal", show: show, production: production %>
</div>
