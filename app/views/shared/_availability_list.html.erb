<%#
  Renders a list of shows for availability.
  Each show is rendered individually using _show_row.

  Required params:
    - shows: Array of Show objects
    - entity_key: String key for entity (e.g., "person" or "group_123")
    - entity: Person or Group object
    - availabilities: Hash of { show_id => ShowAvailability }

  Optional params:
    - show_production: Show production name (default: false)
    - show_location: Show location (default: true)
    - has_groups: Whether user has groups (default: false)
    - manage_context: Whether in manage context for URL generation (default: false)
%>

<%
  show_production = local_assigns.fetch(:show_production, false)
  show_location = local_assigns.fetch(:show_location, true)
  has_groups = local_assigns.fetch(:has_groups, false)
  manage_context = local_assigns.fetch(:manage_context, false)
%>

<div class="space-y-1" data-controller="linked-highlight">
  <% shows.each do |show| %>
    <% availability = availabilities[show.id] %>
    <%= render partial: "shared/show_row", locals: {
      show: show,
      show_location: show_location,
      show_production: show_production,
      show_linked: true,
      availability: availability,
      entity_key: entity_key,
      entity: entity,
      has_groups: has_groups,
      manage_context: manage_context,
      right_panel: :availability
    } %>
  <% end %>
</div>
