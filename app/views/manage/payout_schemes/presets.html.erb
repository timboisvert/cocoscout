<% content_for :title, "Choose Preset - #{@production.name}" %>

<div class="w-full mb-10">
  <%= render partial: "shared/notice", locals: { notice: notice, alert: alert } %>
  <%= render partial: "shared/top_menu", locals: {
    breadcrumbs: [
      ["Money", manage_production_money_index_path(@production)],
      ["Payout Schemes", manage_production_money_payout_schemes_path(@production)]
    ],
    text: "Choose a Preset",
    links: []
  } %>

  <p class="text-gray-600 mb-6">Start with a preset and customize it to fit your needs.</p>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    <% PayoutScheme::PRESETS.each do |key, preset| %>
      <div class="bg-white rounded-lg border border-gray-200 p-5 hover:border-pink-300 transition-colors">
        <h3 class="font-semibold text-gray-900 mb-2"><%= preset[:name] %></h3>
        <p class="text-sm text-gray-600 mb-4"><%= preset[:description] %></p>

        <div class="text-xs text-gray-500 mb-4 p-3 bg-gray-50 rounded">
          <% case key %>
          <% when :no_pay %>
            <div class="space-y-1">
              <div>$0 for all performers</div>
              <div class="text-gray-400">Non-revenue events, rehearsals, etc.</div>
            </div>
          <% when :even_split %>
            <div class="space-y-1">
              <div>50% → House</div>
              <div>50% → Split equally among performers</div>
            </div>
          <% when :per_ticket %>
            <div class="space-y-1">
              <div>Expenses covered first</div>
              <div>$1.00 per ticket per performer</div>
            </div>
          <% when :per_ticket_guaranteed %>
            <div class="space-y-1">
              <div>Expenses covered first</div>
              <div>$1.00 per ticket (min $25) per performer</div>
            </div>
          <% when :flat_fee %>
            <div class="space-y-1">
              <div>$50.00 flat per performer</div>
            </div>
          <% when :share_based %>
            <div class="space-y-1">
              <div>40% → House</div>
              <div>60% → Split by shares</div>
            </div>
          <% end %>
        </div>

        <%= form_with url: manage_production_create_from_preset_money_payout_schemes_path(@production), method: :post, local: true do |f| %>
          <%= hidden_field_tag :preset_key, key %>
          <%= render "shared/button", text: "Use This Preset", variant: "secondary", size: "small", type: :submit %>
        <% end %>
      </div>
    <% end %>

    <!-- Custom option -->
    <div class="bg-white rounded-lg border border-dashed border-gray-300 p-5 flex flex-col justify-center items-center">
      <svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16m8-8H4"/>
      </svg>
      <h3 class="font-semibold text-gray-900 mb-1">Custom Scheme</h3>
      <p class="text-sm text-gray-500 text-center mb-4">Build your own from scratch</p>
      <%= link_to manage_production_new_money_payout_scheme_path(@production) do %>
        <%= render "shared/button", text: "Create Custom", variant: "outline", size: "small" %>
      <% end %>
    </div>
  </div>
</div>
