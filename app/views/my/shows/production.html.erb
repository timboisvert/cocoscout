<% content_for :title, "My Shows" %>

<div class="w-full">

  <%= render partial: "shared/notice", locals: { notice: notice } %>

  <%= render partial: "shared/top_menu", locals: {
    breadcrumbs: [
        ["My Shows", my_shows_path]
    ],
    text: @production.name,
    links: []
  } %>

    <div class="grid grid-cols-1 gap-2 mt-2">

        <div class="p-4 border border-gray-200 rounded-lg hover:border-gray-400 transition-all flex flex-col sm:flex-row sm:items-center gap-4">
            <% if @production.logo.attached? %>
                <div class="w-full sm:w-auto sm:flex-shrink-0">
                    <%= image_tag @production.logo.variant(:small), alt: "#{@production.name} logo", class: "w-full sm:w-[100px] object-contain rounded" %>
                </div>
            <% end %>
            <div class="w-full sm:w-auto text-left">
                <div class="font-bold text-lg sm:text-xl"><%= @production.name %></div>
            </div>
        </div>

        <div class="col-span-1">

            <% @shows.each do |show| %>

                <%= link_to my_show_path(show.production, show) do %>
                    <% assignment = @assignments_by_show[show] %>
                    <div class="mb-2 border p-4 rounded-lg border-gray-200 hover:border-gray-400">

                        <div class="font-bold text-md sm:text-lg">
                            <%= show.date_and_time.strftime("%B %d, %Y at %l:%M %p") %>
                        </div>

                        <% if show.secondary_name.present? %>
                            <div class="text-sm text-gray-500 mb-1">
                                <%= show.secondary_name %>
                            </div>
                        <% end %>


                        <div class="text-sm text-gray-500">
                            <% if assignment %>
                                My Role: <strong class="text-pink-500"><%= assignment.role.name %></strong>
                            <% else %>
                                You aren't assigned a role for this show.
                            <% end %>
                        </div>

                    </div>
                <% end %>

            <% end %>
        </div>

    </div>



</div>