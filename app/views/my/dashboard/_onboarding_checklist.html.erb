<% tasks = person.onboarding_tasks %>
<% return if tasks.empty? || person.profile_welcomed_at.present? %>

<%
  # Map task keys to their destination paths
  task_paths = {
    headshot: profile_path(anchor: "headshots"),
    resume: profile_path(anchor: "resumes"),
    payment: my_payments_setup_path,
    profile: profile_path(anchor: "bio")
  }
%>

<div class="border border-gray-200 rounded-lg overflow-hidden mb-6 bg-white">
  <div class="px-4 py-3 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <%= render "shared/cocoscout_logo", size: :tiny %>
      <h3 class="text-base coustard-regular text-gray-900">Welcome to CocoScout! Get started by completing your profile.</h3>
    </div>
    <%= button_to my_dismiss_onboarding_path, method: :post, class: "text-gray-400 hover:text-gray-600 p-1 -mr-1", title: "Dismiss" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    <% end %>
  </div>

  <div class="px-4 pb-3">
    <div class="flex flex-wrap gap-2">
      <% tasks.each do |task| %>
        <% task_path = task_paths[task[:key]] || profile_path %>
        <%= link_to task_path, class: "group flex items-center gap-2 px-3 py-1.5 rounded-full text-sm #{task[:completed] ? 'bg-gray-100 text-gray-500' : 'bg-pink-50 text-gray-700 hover:bg-pink-100'} transition-colors" do %>
          <% if task[:completed] %>
            <svg class="w-4 h-4 text-pink-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span class="line-through"><%= task[:title] %></span>
          <% else %>
            <span class="w-4 h-4 rounded-full border-2 border-pink-300 group-hover:border-pink-500 flex-shrink-0"></span>
            <span class="group-hover:text-pink-600"><%= task[:title] %></span>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
