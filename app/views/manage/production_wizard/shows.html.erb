<%= render layout: "manage/production_wizard/wizard_layout", locals: { current_step: 5, step_name: "Shows" } do %>
  <div class="text-center mb-6">
    <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <svg class="w-8 h-8 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
    </div>
    <h2 class="text-xl font-bold text-gray-900 coustard-regular">Do you know when your first shows are?</h2>
    <p class="text-gray-600 mt-2">If you already have shows scheduled, you can add them now. You can always add more later.</p>
  </div>

  <%= form_with url: manage_productions_wizard_save_shows_path, method: :post, local: true, id: "shows-form" do |form| %>
    <div class="space-y-4">
      <!-- Not ready option -->
      <label class="block cursor-pointer">
        <div id="no-shows-option" class="p-4 rounded-lg border-2 transition-colors <%= @wizard_state[:has_shows] == 'no' || @wizard_state[:has_shows].nil? ? 'border-pink-500 bg-pink-50' : 'border-gray-200 bg-gray-50' %> hover:border-pink-300">
          <div class="flex items-start">
            <input type="radio" name="has_shows" value="no"
                   <%= "checked" if @wizard_state[:has_shows] == 'no' || @wizard_state[:has_shows].nil? %>
                   class="mt-1 h-4 w-4 text-pink-500 border-gray-300 focus:ring-pink-500 accent-pink-500">
            <div class="ml-3">
              <p class="font-medium text-gray-900">I'll add shows later</p>
              <p class="text-sm text-gray-500 mt-1">Skip this step for now</p>
            </div>
          </div>
        </div>
      </label>

      <!-- Has shows option -->
      <label class="block cursor-pointer">
        <div id="yes-shows-option" class="p-4 rounded-lg border-2 transition-colors <%= @wizard_state[:has_shows] == 'yes' ? 'border-pink-500 bg-pink-50' : 'border-gray-200 bg-gray-50' %> hover:border-pink-300">
          <div class="flex items-start">
            <input type="radio" name="has_shows" value="yes"
                   <%= "checked" if @wizard_state[:has_shows] == 'yes' %>
                   class="mt-1 h-4 w-4 text-pink-500 border-gray-300 focus:ring-pink-500 accent-pink-500">
            <div class="ml-3">
              <p class="font-medium text-gray-900">Yes, I have shows to schedule</p>
              <p class="text-sm text-gray-500 mt-1">Add your first shows or events now</p>
            </div>
          </div>
        </div>
      </label>
    </div>

    <div class="mt-8 flex justify-between items-center">
      <%= link_to manage_productions_wizard_roles_path, class: "text-gray-500 hover:text-gray-700 text-sm py-2" do %>
        ‚Üê Back
      <% end %>
      <%= render "shared/button", text: "Next", variant: "primary", size: "medium", type: :submit %>
    </div>
  <% end %>
<% end %>

<script>
(function() {
  const noShowsOption = document.getElementById('no-shows-option');
  const yesShowsOption = document.getElementById('yes-shows-option');

  // Handle radio button changes for visual feedback
  document.querySelectorAll('input[name="has_shows"]').forEach(radio => {
    radio.addEventListener('change', function() {
      if (this.value === 'yes') {
        yesShowsOption.classList.add('border-pink-500', 'bg-pink-50');
        yesShowsOption.classList.remove('border-gray-200', 'bg-gray-50');
        noShowsOption.classList.remove('border-pink-500', 'bg-pink-50');
        noShowsOption.classList.add('border-gray-200', 'bg-gray-50');
      } else {
        noShowsOption.classList.add('border-pink-500', 'bg-pink-50');
        noShowsOption.classList.remove('border-gray-200', 'bg-gray-50');
        yesShowsOption.classList.remove('border-pink-500', 'bg-pink-50');
        yesShowsOption.classList.add('border-gray-200', 'bg-gray-50');
      }
    });
  });
})();
</script>
