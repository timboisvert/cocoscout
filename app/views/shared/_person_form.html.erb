<div>

    <div class="mb-5 md:flex md:space-x-5">
        <div class="md:w-2/3">
            <% if @person.errors[:name].none? %>
                <%= person_form.label :name, "Name" %>
            <% else %>
                <%= person_form.label :name, "Name is required", class: "text-pink-600"  %>
            <% end %>
            <span class="text-sm text-gray-500"> (Your stage name or performing name)</span>
            <%= person_form.text_field :name, class: ["block shadow-sm rounded-lg border px-3 py-2 mt-2 w-full", {"border-gray-400": @person.errors[:name].none?, "border-pink-500": @person.errors[:name].any?}] %>
        </div>

        <div class="md:w-1/3 mt-5 md:mt-0">
            <%= person_form.label :pronouns %>
            <span class="text-sm text-gray-500"> (optional)</span>
            <%= person_form.text_field :pronouns, class: ["block shadow-sm rounded-lg border px-3 py-2 mt-2 w-full", {"border-gray-400": @person.errors[:pronouns].none?, "border-pink-500": @person.errors[:pronouns].any?}] %>
        </div>
    </div>

    <div class="my-5" data-controller="socials">
        <label>Socials<span class="text-sm text-gray-500"> (optional)</span></label>
        <div id="socials-fields" data-socials-target="list" class="mt-1">
            <%= person_form.fields_for :socials do |social_form| %>
                <div class="flex items-center mb-2 socials-fields-row" data-socials-target="row"<% if social_form.object.persisted? %> data-socials-persisted="true"<% end %>>
                    <%= social_form.hidden_field :id %>
                    <%= social_form.hidden_field :_destroy, value: "0", data: { socials_target: "destroy" } %>
                    <%= social_form.select :platform, Social.platforms.keys.map { |k| [k.titleize, k] }, {}, class: "inline-block shadow-sm rounded-lg border px-3 py-2 mr-2 border-gray-400" %>
                    <%= social_form.text_field :handle, placeholder: "Username/Handle", class: "inline-block w-64 shadow-sm rounded-lg border px-3 py-2 mr-2 border-gray-400" %>
                    <%= link_to "Remove", '#', class: "remove-social text-pink-500 underline text-sm", data: { action: "socials#remove" } %>
                </div>
            <% end %>
        </div>
        <%= link_to "Add Social", '#', class: "text-pink-500 underline text-sm", data: { action: "socials#add" } %>
        <template id="socials-template">
            <div class="flex items-center mb-2 socials-fields-row" data-socials-target="row">
                <select name="" class="inline-block shadow-sm rounded-lg border px-3 py-2 mr-2 border-gray-400">
                    <% Social.platforms.keys.each do |platform| %>
                        <option value="<%= platform %>"><%= platform.titleize %></option>
                    <% end %>
                </select>
                <input type="text" name="" class="inline-block w-64 shadow-sm rounded-lg border px-3 py-2 mr-2 border-gray-400" placeholder="Username/Handle" />
                <a href="#" class="remove-social text-pink-500 underline text-sm" data-action="socials#remove">Remove</a>
            </div>
        </template>
    </div>

    <div class="my-5 md:flex md:w-full">
        <div class="md:mr-5 md:w-half">
            <% if @person.headshot.attached? %>
                <div class="text-md">Headshot</div>
                <div class="my-2 flex p-4 border border-gray-200 rounded-lg hover:border-gray-400 hover:shadow-sm transition-all items-top max-w-md">
                    <div class="w-full">

                        <% if displayable_attachment?(@person.headshot) %>
                            <div class="mb-4">
                                <%= image_tag url_for(@person.headshot), class: "rounded shadow max-w-72 rounded-lg border border-gray-200" %>
                            </div>
                        <% elsif pending_attachment?(@person.headshot) %>
                            <div class="mb-4 rounded-lg border border-dashed border-slate-300 bg-slate-50 px-4 py-3 text-sm text-slate-600">
                                Headshot will be uploaded after saving.
                                <% if @person.headshot.filename.present? %>
                                    <div class="mt-1 text-xs text-slate-400">
                                        <%= @person.headshot.filename.to_s %>
                                    </div>
                                <% end %>
                            </div>
                        <% end %>

                        <div class="flex items-center justify-between">
                            <%= person_form.label :image, "Update Headshot:", class: "text-sm" %>
                            <span class="text-sm text-gray-500">(JPEG, JPG, or PNG)</span>
                        </div>

                        <div class="block shadow-sm rounded-lg border px-3 py-2 mt-2 border-gray-400">
                            <%= person_form.file_field :headshot, class: "text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:text-white file:bg-pink-500 hover:file:bg-pink-600" %>
                        </div>

                    </div>
                </div>
            <% else %>
                <div class="text-md pt-2">Headshot</div>
                <div class="mr-5 inline-block">

                    <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-500">(JPEG, JPG, or PNG)</span>
                    </div>

                    <div class="block shadow-sm rounded-lg border px-3 py-2 mt-2 border-gray-400">
                        <%= person_form.file_field :headshot, class: "text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:text-white file:bg-pink-500 hover:file:bg-pink-600" %>
                    </div>

                </div>
            <% end %>
        </div>

        <div class="md:my-0 md:ml-5 md:w-half">
            <% if @person.resume.attached? %>
                <div class="text-md">Resume</div>
                <div class="my-2 flex p-4 border border-gray-200 rounded-lg hover:border-gray-400 hover:shadow-sm transition-all items-top max-w-md">
                    <div class="w-full">

                        <% if displayable_attachment?(@person.resume) && @person.resume.previewable? %>
                            <div class="mb-4">
                                <%= image_tag @person.resume.preview(resize_to_limit: [1224, 1584]), class: "w-full object-contain" %>
                            </div>
                        <% elsif pending_attachment?(@person.resume) %>
                            <div class="mb-4 rounded-lg border border-dashed border-slate-300 bg-slate-50 px-4 py-3 text-sm text-slate-600">
                                Resume will be uploaded after saving.
                                <% if @person.resume.filename.present? %>
                                    <div class="mt-1 text-xs text-slate-400">
                                        <%= @person.resume.filename.to_s %>
                                    </div>
                                <% end %>
                            </div>
                        <% end %>

                        <div class="flex items-center justify-between">
                            <%= person_form.label :image, "Update Resume:", class: "text-sm" %>
                            <span class="text-sm text-gray-500">(PDF, JPG, or PNG)</span>
                        </div>

                        <div class="block shadow-sm rounded-lg border px-3 py-2 mt-2 border-gray-400">
                            <%= person_form.file_field :resume, class: "text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:text-white file:bg-pink-500 hover:file:bg-pink-600" %>
                        </div>

                    </div>
                </div>
            <% else %>
                <div class="text-md pt-2">Resume</div>
                <div class="mr-5 inline-block">

                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-500">(PDF, JPG, or PNG)</span>
                    </div>

                    <div class="block shadow-sm rounded-lg border px-3 py-2 mt-2 border-gray-400">
                        <%= person_form.file_field :resume, class: "text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:text-white file:bg-pink-500 hover:file:bg-pink-600" %>
                    </div>

                </div>
            <% end %>
        </div>
    </div>

</div>