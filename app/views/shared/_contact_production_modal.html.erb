<%#
  Contact Production Team Modal

  A beautiful modal for users to send messages to production teams.
  Include this once per page and trigger it with data-action="click->contact-production#open"

  Usage:
    <%= render "shared/contact_production_modal" %>

    Then on any button:
    <button data-action="click->contact-production#open"
            data-production-id="123"
            data-production-name="Hamilton">
      Contact Team
    </button>
%>

<div data-contact-production-target="modal"
     class="hidden fixed inset-0 z-50 overflow-y-auto"
     aria-labelledby="contact-production-title"
     role="dialog"
     aria-modal="true">

  <%# Backdrop %>
  <div class="fixed inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity"
       data-action="click->contact-production#closeOnBackdrop"></div>

  <%# Modal Panel %>
  <div class="flex min-h-full items-center justify-center p-4">
    <div class="relative w-full max-w-lg transform overflow-hidden rounded-2xl bg-white shadow-2xl transition-all"
         data-action="click->contact-production#stopPropagation">

      <%# Header %>
      <div class="bg-gradient-to-r from-pink-500 to-pink-600 px-6 py-5">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="flex h-10 w-10 items-center justify-center rounded-full bg-white/20">
              <svg class="h-5 w-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>
            <div>
              <h3 id="contact-production-title" class="text-lg font-semibold text-white">
                Contact Production Team
              </h3>
              <p class="text-sm text-pink-100">
                Send a message to <span data-contact-production-target="productionName" class="font-medium">the production team</span>
              </p>
            </div>
          </div>
          <button type="button"
                  class="rounded-full p-1 text-white/80 hover:text-white hover:bg-white/10 transition-colors cursor-pointer"
                  data-action="click->contact-production#close">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
      </div>

      <%# Form %>
      <form data-contact-production-target="form"
            method="post"
            enctype="multipart/form-data"
            class="p-6 space-y-5"
            data-action="submit->contact-production#submit"
            data-turbo="false">
        <%= hidden_field_tag :authenticity_token, form_authenticity_token %>

        <%# Subject %>
        <div>
          <label for="contact-subject" class="block text-sm font-medium text-gray-700 mb-1.5">
            Subject
          </label>
          <input type="text"
                 name="subject"
                 id="contact-subject"
                 data-contact-production-target="subject"
                 class="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-gray-900 placeholder-gray-400 focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 focus:outline-none transition-colors"
                 placeholder="What's this about?"
                 required>
        </div>

        <%# Message %>
        <div>
          <label for="contact-body" class="block text-sm font-medium text-gray-700 mb-1.5">
            Message
          </label>
          <%= rich_text_area_tag :body, nil,
              id: "contact-body",
              data: { "contact-production-target": "body" },
              class: "w-full min-h-[120px]",
              placeholder: "Write your message here..." %>
        </div>

        <%# Image Attachments %>
        <%= render "shared/image_dropzone", size: "medium" %>

        <%# Actions %>
        <div class="flex items-center justify-end gap-3 pt-2">
          <%= render "shared/button",
              text: "Cancel",
              variant: "ghost",
              type: :button,
              data: { action: "click->contact-production#close" } %>
          <%= render "shared/button",
              text: "Send Message",
              variant: "primary",
              type: :submit,
              data: { "contact-production-target": "submitButton" } %>
        </div>
      </form>

      <%# Footer note %>
      <div class="px-6 pb-5">
        <p class="text-xs text-gray-400 text-center">
          Your message will be sent to the production managers and they'll receive a notification.
        </p>
      </div>
    </div>
  </div>
</div>
