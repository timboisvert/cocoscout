<%# Partial for displaying a directory entry as a tile %>
<div class="relative group">

<%= link_to (entry.is_a?(Person) ? manage_person_path(entry) : manage_group_path(entry)),
            data: { turbo_frame: "_top" },
            class: "block" do %>
  <div class="relative aspect-square rounded-lg overflow-hidden bg-gray-100 mb-2">
    <% if entry.headshot&.attached? %>
      <%= image_tag entry.safe_headshot_variant(:tile),
                    class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",
                    loading: "lazy",
                    alt: entry.name %>
    <% else %>
      <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200">
        <% if entry.is_a?(Person) %>
          <div class="text-2xl font-bold text-gray-500">
            <%= entry.initials %>
          </div>
        <% else %>
          <svg class="w-1/2 h-1/2 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-7 8c0-2.66 5.33-4 8-4s8 1.34 8 4v2H5v-2zm10-8c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.21 0-.41.02-.61.05A5.978 5.978 0 0117 8c0 2.31-1.31 4.31-3.22 5.32.63-.13 1.3-.2 2-.2 2.67 0 8 1.34 8 4v2h-4v-2.12c-.65-.68-2.05-1.36-3.78-1.7-.92-.16-1.84-.28-2.77-.28z"/>
          </svg>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="text-xs font-medium text-gray-900 group-hover:text-pink-600 transition-colors truncate" title="<%= entry.name %>">
    <%= entry.name %>
  </div>
<% end %>
</div>
